<div class="editor-row">
  <div class="section gf-form-group">
    <h5 class="section-heading">计算累计</h5>
    <div class="gf-form">
      <gf-form-switch class="gf-form" label="计算累计" label-class="width-8" checked="ctrl.panel.cumulativeConf.enable" on-change="ctrl.render()"></gf-form-switch>
      <label class="gf-form-label"><tip>累计seres值</tip></label>
    </div>
    <gf-form-switch ng-if="ctrl.panel.cumulativeConf.enable" class="width-8" label="映射" label-class="query-keyword width-" checked="ctrl.panel.cumulativeConf.enableInit">
    </gf-form-switch>
    <div class="gf-form-inline" ng-if="ctrl.panel.cumulativeConf.enableInit" >
      <div class="gf-form">
        <label class="gf-form-label width-8">初始值</label>
      </div>
      <div class="gf-form">
        <label class="gf-form-label width-8">累计</label>
      </div>
      <div class="gf-form">
        <label class="gf-form-label">
          <a class="pointer" ng-click="ctrl.panel.cumulativeConf.initMapping=ctrl.panel.cumulativeConf.initMapping||[];ctrl.panel.cumulativeConf.initMapping.push({initRefId:'',sets:['']})">
            <i class="fa fa-plus"></i>
          </a>
        </label>
      </div>
    </div>
    <div class="gf-form-inline" ng-repeat="item in ctrl.panel.cumulativeConf.initMapping" ng-if="ctrl.panel.cumulativeConf.enable">
      <div class="gf-form">
        <input type="text" class="gf-form-input width-8" ng-model="item.initRefId" spellcheck="false" placeholder="refId" ng-blur="ctrl.refresh()">
      </div>
      <div class="gf-form" ng-repeat="set in item.sets track by $index">
        <input type="text" class="gf-form-input width-8" ng-model="item.sets[$index]" spellcheck="false" placeholder="refId" ng-blur="ctrl.refresh()">
        <label class="gf-form-label">
          <a class="pointer" ng-click="ctrl.removeInitMapping(item,set)">
            <i class="fa fa-trash"></i>
          </a>
        </label>
      </div>
      <div class="gf-form">
        <label class="gf-form-label">
          <a class="pointer" ng-click="item.sets.push('')">
            <i class="fa fa-plus"></i>
          </a>
        </label>
      </div>
    </div>
  </div>
</div>
