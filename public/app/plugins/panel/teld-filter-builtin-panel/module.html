<div class="row" style="position: relative;">
  <!-- 条件显示区 -->
  <div class="OrerationTitleHeightKH" style='float: left;display: inherit;'>
    <span>&nbsp;&nbsp;</span>    
    <span ng-if="QueryOptions.Querytype!='inputGroup'" ng-class="{'OrerationTitleHeightKH':!QueryOptions.alwaysShow}" ng-repeat="QueryOptions in ctrl._panle.QueryList" ng-if='!QueryOptions.toTop'>
      <span 
        ng-if="QueryOptions.Querytype!='date' && !QueryOptions.MultiClick && QueryOptions.QueryClickVal!='' && QueryOptions.isViewShow"
        style="color:black" ng-class="{teldfilterbuiltinpanelIsLocalStorage:QueryOptions.IsLocalStorage}">
        {{QueryOptions.QueryTitle}}:<span class="OrerationTitleHeightKHSpan">{{QueryOptions.QueryClickName}}</span>
      </span>
      <span
        ng-if="QueryOptions.Querytype!='date' && QueryOptions.MultiClick && QueryOptions.isViewShow && QueryOptions.QueryClickName!=''"
        style="color:black">
        {{QueryOptions.QueryTitle}}:
        <span ng-repeat="QueryOption in QueryOptions.QueryOptions" ng-if="QueryOption.isClick"
          ng-class="{teldfilterbuiltinpanelIsLocalStorage:QueryOptions.IsLocalStorage}"><span
            class="OrerationTitleHeightKHSpan">{{QueryOption.OptionName}}</span>
          <span ng-if="!$last">;</span>
        </span>
      </span>
      <span ng-if="QueryOptions.Querytype=='date' && QueryOptions.isViewShow" style="color:black">
        {{QueryOptions.QueryTitle}}:
        <span ng-repeat="QueryOption in QueryOptions.QueryOptions" ng-if="QueryOption.ClickValue!=''"
          ng-class="{teldfilterbuiltinpanelIsLocalStorage:QueryOptions.IsLocalStorage}">
          <i style="cursor: pointer;" ng-if='QueryOptions.yesterdayConf.enable' class="fa fa-angle-double-left"
            title="前一天" ng-click="ctrl.goYesterday(QueryOption,QueryOptions.yesterdayConf,$event);ctrl.refreshFilter();"
            aria-hidden="true"></i>
          <span class="OrerationTitleHeightKHSpan">{{ctrl.formatTime(QueryOption)}}</span>
          <i style="cursor: pointer;" ng-if='QueryOptions.tomorrowConf.enable' class="fa fa-angle-double-right"
            title="后一天" ng-click="ctrl.goTomorrow(QueryOption,QueryOptions.tomorrowConf,$event);ctrl.refreshFilter();"
            aria-hidden="true"></i>
          <span ng-if="!$last">~</span>
        </span>
      </span>      
    </span> 
    <span ng-if="inputGroups.isViewShow"  style="display: inline-block;" ng-class="{'OrerationTitleHeightKH':!inputGroups.alwaysShow}" ng-repeat="inputGroups in ctrl.filterInputGroup()" ng-if='!inputGroups.toTop'>
      <span class="OrerationTitleHeightKH" ng-repeat="inputGroupItem in inputGroups.QueryOptions" >
        <span>
          {{inputGroupItem.Title}}:
        </span>        
        <span ng-switch="inputGroupItem.inputConf.ctlType">
          <select ng-switch-when="select"  ng-model="inputGroupItem.ClickValue"  ng-options="item for item in (inputGroupItem.inputConf.selectOpts||[])"></select>
          <span ng-switch-when="text" ng-switch="inputGroupItem.inputConf.textCtlType">
            <span ng-switch-when="date" class="gf-timepicker-component-v">
              <input type="text" class="input-small gf-form-input" style="display: inline-block;width:100px;"
                datepicker-popup="{{inputGroupItem.inputDateFormat||ctrl.myDefaultDateFormat}}" ng-model="inputGroupItem.ClickValue"
                is-open="inputGroupItem.openedAtBar" datepicker-options="ctrl.dateOptions" custom-class="ctrl.getDayClass(date, mode)"
                ng-required="true" show-weeks="false" clear-text="清空" current-text="今天" close-text="确定" />
              <label ng-click="ctrl.openedAtBar(inputGroupItem,$event)" class="gf-form-label inputGo" style="margin-left: -6px;">
                <a>
                  <i class="pointer fa fa-calendar"></i>
                </a>
              </label>              
            </span>
            <span ng-switch-default>
              <input type="{{inputGroupItem.inputConf.textCtlType}}" class="input-small gf-form-input"
                ng-style="{{ ctrl.setStyle({'width':inputGroupItem.inputConf.textCtlType =='number' ? '100px' : 'auto'}, inputGroupItem.inputConf.style)}}"
                style="display: inline-block;" ng-model="inputGroupItem.ClickValue" ng-change="ctrl.render()"
                ng-model-onblur />
              <span ng-if="inputGroupItem.ClickValue" style="position: relative;left: -20px;cursor: pointer;">
                <i ng-click='inputGroupItem.ClickValue=""' class="fa fa-remove"></i>
              </span>
            </span>
          </span>          
        </span>
      </span>
      
    </span>
    <label ng-if="ctrl.filterInputGroup().length>0" ng-click="ctrl.updateInput()" class="gf-form-label inputGo">
      <a>
        <i class="pointer fa fa-search"></i>
      </a>
    </label> 
  </div>
  <!-- 条件显示区 -->
  
  <!-- 筛选  -->
  <div ng-hide="ctrl.panel.hideFilterButton" ng-click="ctrl.divOperationFilter()" class="btnFilterKH" style="float: right;margin-top: 0px;margin-right: 11px;">{{ctrl.panel.filterButtonName || "筛选"}}
    <span ng-if="ctrl.btnFilterKHRed" class="btnFilterKHRed"></span>
  </div>
  <!-- 筛选 -->

  <!-- 周期选择区 -->
  <div class="cycle-filter" style="margin-top: 0px;" ng-if='ctrl.getTimeButton().length>0'>
    <div ng-class='{"currentCycle-filter":ctrl.currentCycle===cycle}'
      style="height: 25px;line-height: 23px;margin-bottom:0px;margin-top:0px;border: #43add7 1px solid;border-radius:0px;"
      ng-click="ctrl.eh_emitCycle(cycle)" class="btnFilterKH" ng-repeat="cycle in ctrl.enableCycleConf;">
      {{cycle.name}}
    </div>
  </div>
  <!-- 周期选择区 -->

  <!-- 右上按钮区   -->
  <div ng-switch="QueryOptions.Querytype" ng-if='!ctrl.KwHuTuCaoDropDown' class="cycle-filter" style="margin-top: 0px;"
    ng-repeat="QueryOptions in ctrl.toTopButton();"
    ng-style1="{'border-width':QueryOptions.Querytype=='link'?'0px':'inherit'}">
    <div ng-switch-when="link" ng-repeat="QueryOption in QueryOptions.QueryOptions.slice().reverse();"
      style="width: auto; cursor: pointer; height: 25px;line-height: 23px;margin-bottom:0px;margin-top:0px;border: #43add7 1px solid;border-radius:0px;padding: 0px 5px;"
      class="btnFilterKH" ng-click="ctrl.goLink(QueryOption)">
      {{QueryOption.linkName}} <i style="color:#33B5E5; " class="fa fa-external-link" aria-hidden="true"></i>
    </div>
    <div ng-switch-default ng-repeat="QueryOption in QueryOptions.QueryOptions.slice().reverse();"
      style="height: 25px;line-height: 23px;margin-bottom:0px;margin-top:0px;border: #43add7 1px solid;border-radius:0px;"
      ng-click="ctrl.selectVariable(QueryOptions,QueryOption.OptionName,QueryOption.ClickValue);ctrl.eh_emitToTopButton();"
      class="btnFilterKH" ng-class='{"currentCycle-filter":QueryOptions.QueryClickName==QueryOption.OptionName}'>
      {{QueryOption.OptionName}}
    </div>
  </div>
  <!-- 右上按钮区   -->

  <!-- 弹出窗口区域 -->
  <div ng-click='ctrl.closeDatepickerShow()' class="KwHuTuCaoDropDownPanal form col-xs-12 col-md-6 col-md-offset-4"
    ng-show="ctrl.KwHuTuCaoDropDown">
    <div ng-hide="QueryOptions.Querytype=='link'" ng-switch="QueryOptions.Querytype"
      ng-if="QueryOptions.Querytype!='inputGroup' ||  (QueryOptions.Querytype=='inputGroup' &&  !QueryOptions.isViewShow)" 
      style="display:inline-block;width:100%"      
      ng-repeat="QueryOptions in ctrl._panle.QueryList">
      <div id="YunMonthOffTitle" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 screenPanal"
        style="line-height:30px !important;" ng-if="QueryOptions.QueryTitle || QueryOptions.Querytype=='inputGroup'">
        <span ng-if="QueryOptions.Querytype!='inputGroup'" class="yunClass">{{QueryOptions.QueryTitle}}：</span>
        <span ng-switch-when="input" ng-switch="QueryOptions.inputConf.ctlType">
          <select ng-switch-when="select" ng-options="item for item in (QueryOptions.inputConf.selectOpts||[])"></select>
            <input ng-switch-default type="text" 
            class="input-small gf-form-input" style="display: inline-block;width: auto;" ng-model="QueryOptions.QueryClickName"
              ng-change="ctrl.render()" ng-model-onblur />
        </span>
        <div ng-if="!QueryOptions.isViewShow" ng-switch-when="inputGroup" style="margin-bottom: 5px;" ng-switch="QueryOptions.inputConf.ctlType">
          <span ng-repeat="inputGroupItem in QueryOptions.QueryOptions">
            <span class="yunClass">{{inputGroupItem.Title}}：</span>
            <span ng-switch="inputGroupItem.inputConf.ctlType">
              <select ng-switch-when="select"  ng-model="inputGroupItem.ClickValue"  ng-options="item for item in (inputGroupItem.inputConf.selectOpts||[])"></select>
              <span ng-switch-when="text" ng-switch="inputGroupItem.inputConf.textCtlType">
                <span ng-switch-when="date" class="gf-timepicker-component-v">
                  <input type="text" class="input-small gf-form-input" style="display: inline-block;width:100px;"
                    datepicker-popup="{{inputGroupItem.inputDateFormat||ctrl.myDefaultDateFormat}}" ng-model="inputGroupItem.ClickValue"
                    is-open="inputGroupItem.opened" datepicker-options="ctrl.dateOptions" custom-class="ctrl.getDayClass(date, mode)"
                    ng-required="true" show-weeks="false" clear-text="清空" current-text="今天" close-text="确定" />
                    <label ng-click="ctrl.open(inputGroupItem,$event)" class="gf-form-label inputGo" style="margin-left: -6px;">
                      <a>
                        <i class="pointer fa fa-calendar"></i>
                      </a>
                    </label> 
                </span>
                <span ng-switch-default>
                  <input type="{{inputGroupItem.inputConf.textCtlType}}" class="input-small gf-form-input"
                    ng-style="{{ ctrl.setStyle({'width':inputGroupItem.inputConf.textCtlType =='number' ? '100px' : 'auto'}, inputGroupItem.inputConf.style)}}"
                    style="display: inline-block;" ng-model="inputGroupItem.ClickValue" ng-change="ctrl.render()"
                    ng-model-onblur />
                  <span ng-if="inputGroupItem.ClickValue" style="position: relative;left: -20px;cursor: pointer;">
                    <i ng-click='inputGroupItem.ClickValue=""' class="fa fa-remove"></i>
                  </span>
                </span>
              </span>          
            </span>
          </span>
        </div>
      </div>      
      <div ng-switch-default id="YunMonthOff" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 screenPanalKH">
        <input type="button" class="btnKeHuTuCaoScreen termRight"
          ng-if="QueryOptions.Querytype=='button' && !QueryOptions.MultiClick"
          ng-class="{searchCondBtnActive:QueryOptions.QueryClickName==QueryOption.OptionName}"
          value="{{QueryOption.OptionName}}"
          ng-click="ctrl.selectVariable(QueryOptions,QueryOption.OptionName,QueryOption.ClickValue); "
          onfocus=" this.blur(); " ng-repeat="QueryOption in QueryOptions.QueryOptions" />

        <input type="button" class="btnKeHuTuCaoScreen termRight"
          ng-if="QueryOptions.Querytype=='button' && QueryOptions.MultiClick"
          ng-class="{searchCondBtnActive:QueryOption.isClick}" value="{{QueryOption.OptionName}}"
          ng-click="ctrl.selectVariableMulti(QueryOption,QueryOptions); " onfocus=" this.blur(); "
          ng-repeat="QueryOption in QueryOptions.QueryOptions" />

        <div class="col-lg-4 gf-timepicker-component-v" ng-if="QueryOptions.Querytype=='date'"
          ng-repeat="QueryOption in QueryOptions.QueryOptions">
          <input type="text" class="form-control date-pack" style="width:173px;"
            datepicker-popup="{{QueryOption.inputDateFormat||ctrl.myDefaultDateFormat}}"
            ng-model="QueryOption.ClickValue" is-open="QueryOption.opened" datepicker-options="ctrl.dateOptions"
            custom-class="ctrl.getDayClass(date, mode)" ng-required="true" show-weeks="false" clear-text="清空"
            current-text="今天" close-text="确定" />
          <span class="input-group-btn">
            <button type="button" ng-if='!QueryOption.datepickerShow' class="btn btn-default date-pack-button"
              ng-click="ctrl.open(QueryOption,$event)">
              <i class="fa fa-calendar"></i>
            </button>
            <button type="button" ng-if='QueryOption.datepickerShow' class="btn btn-default date-pack-button"
              ng-click="ctrl.open(QueryOption,$event)">
              <i class="fa fa-close"></i>
            </button>
            <button ng-if='QueryOptions.yesterdayConf.enable' type="button" class="btn btn-default date-pack-button"
              ng-click="ctrl.goYesterday(QueryOption,QueryOptions.yesterdayConf,$event)">
              <i class="fa fa-angle-double-left"></i>
            </button>
            <button ng-if='QueryOptions.tomorrowConf.enable' type="button" class="btn btn-default date-pack-button"
              ng-click="ctrl.goTomorrow(QueryOption,QueryOptions.tomorrowConf,$event)">
              <i class="fa fa-angle-double-right"></i>
            </button>
          </span>
          <datepicker ng-click='$event.stopPropagation();'
            style="position: absolute;z-index: 99999;background-color: white;" ng-if='QueryOption.datepickerShow'
            min-mode='month' ng-model="QueryOption.ClickValue" min-date="minDate" show-weeks="false"
            class="well well-sm" custom-class="getDayClass(date, mode)" ng-required="true">
          </datepicker>
        </div>
      </div>
      <hr class="SplitLineKH">
    </div>
    <div style="display:inline-block;width:100%;">
      <div id="YunBtn" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center"
        style="padding:10px 0;line-height:36px !important;">
        <input type="button" class="btnKeHuTuCaoScreen"
          ng-style="{'background-color':ctrl._panle.ButtonResetColor,'border-color':ctrl._panle.ButtonResetColor}"
          ng-click="ctrl.Filterreset();" value="重置" onfocus="this.blur()" />
        <input type="button" class="btnKeHuTuCaoScreen"
          ng-style="{'background-color':ctrl._panle.ButtonCancelColor,'border-color':ctrl._panle.ButtonCancelColor}"
          ng-click="ctrl.FilterC();" value="取消" onfocus="this.blur()" />
        <input type="button" class="btnKeHuTuCaoScreen btnMapSubmit"
          ng-style="{'background-color':ctrl._panle.ButtonOkColor,'border-color':ctrl._panle.ButtonOkColor}" value="确认"
          onfocus="this.blur()" ng-click="ctrl.setDashboardVariables();ctrl.divOperationFilter();" />
      </div>
      {{ctrl.ButtonOkColor}}
    </div>
  </div>
  <div ng-show="ctrl.KwHuTuCaoDropDown" style="position: fixed;width: 100%;height: 1000000px;margin-top: -200px;"
    ng-click="ctrl.FilterC();"></div>
  <!-- 弹出窗口区域 -->
</div>
