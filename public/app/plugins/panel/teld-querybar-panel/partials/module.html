<div class="teld-querybar-panel" ng-style="ctrl.querybarPanelStyle" style="margin-bottom: -7px;">
  <div ng-show="ctrl.defineQuery">
    <div class="tabbed-view-header">
      <ul ng-hide="ctrl.panel.hiddenTabbedVieHheader" class="gf-tabs" style="margin-top: 0px;">
        <li class="gf-tabs-item" ng-hide="target.hide" ng-repeat="target in ctrl.panel.targets">
          <a class="gf-tabs-link ddd" ng-style="{color:target.conf.required?'red':'inherit'}" ng-click="ctrl.changeQueryBarTab(target)"
            ng-class="{active: ctrl.currentTargetRefId === target.refId}">
            {{target.conf.title}}
            <!-- <i ng-if="target.conf.required" style="color: red;" class="fa fa-asterisk"></i> -->
          </a>
        </li>
      </ul>
    </div>
    <div class="-tabbed-view-body">
      <div ng-hide="target.hide" ng-repeat="target in ctrl.panel.targets" style="margin-top: 0px;border: 1px #52b1d5 solid;border-top-width: 0px;padding: 5px;padding-top: 5px;"
        st2yle="border: 1px red solid;border-top: 0px;padding: 10px;" ng-if="ctrl.currentTargetRefId === target.refId">
        <div class="gf-form-inline">
          <div class="gf-form" ng-repeat="dsQueryVariable in target.conf.dsQueryVariables">
            <input type="text" ng-keyup="ctrl.enterkey(target)"  style="padding-top: 2px; padding-bottom: 2px;" class="gf-form-input" ng-model="ctrl.currentTabInfo[target.refId].dsQuery[dsQueryVariable.name].value"
              spellcheck="false" placeholder="{{dsQueryVariable.label}}">
          </div>
          <div class="gf-form" ng-if='target.conf.orderByOptions.length'>
            <select style="padding-top: 2px; padding-bottom: 2px; height: 24px;" class="gf-form-input" ng-model="ctrl.currentTabInfo[target.refId].orderBy" ng-options="option.text for option in target.conf.orderByOptions">
            </select>
          </div>
          <div class="gf-form" ng-if="target.conf.dsQueryVariables.length>0">
            <label class="gf-form-label" style="padding-top: 2px; padding-bottom: 2px;">
              <a ng-click="ctrl.toggleQuery(target)">
                <i class="fa fa-filter"></i>
              </a>
            </label>
          </div>
        </div>
        <ks-swiper-container wrapper-cls="swiper-wrapper-cls" loop="false" space-between="10" show-nav-buttons="true" on-ready="ctrl.onReadySwiper(swiper)"
          override-parameters="{slideToClickedSlide:true, grabCursor:true, mousewheelControl:true,observer: true, observeParents: true}">
          <ks-swiper-slide slider-cls='{{ctrl.getSliderCls(target,$index)}}' ng-repeat="row in ctrl.getQueryResult(target)">
            <div ng-if="row.isNil">
              <div ng-click="ctrl.setQueryBarVariable(target, row)">
                <div class="empty">
                  <p style="font-weight: bold;">无</p>
                </div>
              </div>
            </div>
            <div ng-if="!row.isNil">
              <div ng-click="ctrl.setQueryBarVariable(target, $index, row)" style="padding-right:20px;">
                <div class="activeflag">
                  <i class="fa fa-check-square-o"></i>
                </div>
                <div class="lt">
                  <p>{{$index+1}}</p>
                </div>
                <div class="rt">
                  <div>
                    <p class="top"  ng-style="row.conf.topStyle" ng-class="row.conf.topCls">{{row.labelTop}}</p>
                    <p class="title" ng-style="row.conf.titleStyle" ng-class="row.conf.titleCls">
                      <div>{{row.label}}</div>
                    </p>
                    <p class="bottom" ng-style="row.conf.bottomStyle" ng-class="row.conf.bottomCls">{{row.labelBottom}}</p>
                  </div>
                </div>
              </div>
            </div>
          </ks-swiper-slide>
          <ks-swiper-slide ng-if="ctrl.spin && ctrl.currentTarget.refId === target.refId">
            <div>
              <div class="empty">
                <p>
                  <i class="fa fa-refresh fa-spin" style="font-size: 24px;"></i>
                </p>
              </div>
            </div>
          </ks-swiper-slide>
        </ks-swiper-container>
        <!-- <div class="myslides">
              <ks-swiper-container autoplay="false" swiper="ctrl.swiper" on-ready="ctrl.onReadySwiper(swiper)">
                  <ks-swiper-slide ng-repeat="s in [1,2,3,4,5,6,7,8,9,10,11,12,13,14]">
                      <img ng-click="ctrl.alert(s);" ng-src="http://api.randomuser.me/portraits/thumb/men/{{s}}.jpg">
                  </ks-swiper-slide>
              </ks-swiper-container>
              <button ng-click="ctrl.next()">Next</button>
          </div> -->
      </div>
    </div>
  </div>
  <div>
    <div class="gf-form-inline">
      <div class="gf-form filter" ng-repeat="(key,variable) in ctrl.getExprVariables()">
        <label class="gf-form-label">{{key}}：
          <span class="filter-value">{{variable.current.text}}</span>
        </label>
      </div>
      <div class="gf-form filter-button">
        <button type="button" class="btn gf-form-btn btn-secondary" ng-click="ctrl.query();">
          <i class="fa fa-search"></i>
        </button>
        <button type="button" class="btn gf-form-btn" ng-click="ctrl.row.height=1;ctrl.defineQuery=!ctrl.defineQuery">
          <i class="fa" ng-class="{true:'fa-angle-double-up',false:'fa-angle-double-down'}[ctrl.defineQuery]"></i>
        </button>
      </div>
    </div>
  </div>
