<div ng-switch="ctrl.panel.serieType">
  <div class="editor-row" ng-switch-when="line">
    <!-- areaStyle start -->
    <div class="section gf-form-group">
      <gf-form-switch class="gf-form" label="smooth" label-class="query-keyword width-7" checked="ctrl.panel.echarts.series.line.smooth">
      </gf-form-switch>
      <div class="gf-form">
        <label class="gf-form-label query-keyword width-14">areaStyle</label>
      </div>
      <div class="gf-form">
        <label class="gf-form-label width-7">opacity
          <tip>图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。</tip>
        </label>
        <input type="number" min='0' step='0.1' max='1' class="gf-form-input width-7" bs-typeahead="[0,0.7]" min-length="0"
          ng-model="ctrl.panel.echarts.series.line.areaStyle.normal.opacity">
      </div>
    </div>
    <!-- areaStyle end -->
    <div class="section gf-form-group">
      <h5 class="section-heading">Label</h5>
      <div class="gf-form-inline">
        <gf-form-switch class="gf-form" label="Show" label-class="width-8" checked="ctrl.panel.echarts.series.line.label.normal.show"
          on-change="ctrl.render()"></gf-form-switch>
      </div>
      <div class="gf-form">
        <label class="gf-form-label query-keyword width-8">textStyle</label>
      </div>
      <ec-opt-textstyle ctrl='ctrl' text-style='ctrl.panel.echarts.series.line.label.normal.textStyle' />
      <div class="gf-form">
        <label class="gf-form-label query-keyword width-8">position</label>
        <!--<input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.line.label.normal.position">-->
        <select class="gf-form-input" ng-model="ctrl.panel.echarts.series.line.label.normal.position" ng-options="serie for serie in ['top','left','right','bottom','inside','insideLeft','insideRight','insideTop','insideBottom','insideTopLeft','insideBottomLeft','insideTopRight','insideBottomRight']"></select>
      </div>
    </div>
    <div class="section gf-form-group">
      <h5 class="section-heading">扩展配置</h5>
      <div class="gf-form">
        <gf-form-switch class="gf-form" label="合并计算比例" label-class="width-8" checked="ctrl.panel.merge.enable"
          on-change="ctrl.render()"></gf-form-switch>
        <label class="gf-form-label">
          <tip>计算比例，beta</tip>
        </label>
      </div>
      <div class="gf-form">
        <gf-form-switch class="gf-form" label="计算累计" label-class="width-8" checked="ctrl.panel.cumulativeConf.enable"
          on-change="ctrl.render()"></gf-form-switch>
        <label class="gf-form-label">
          <tip>累计seres值</tip>
        </label>
      </div>
      <gf-form-switch ng-if="ctrl.panel.cumulativeConf.enable" class="gf-form" label="label" label-class="query-keyword width-"
        checked="ctrl.panel.cumulativeConf.enableInit">
      </gf-form-switch>
      <div class="gf-form-inline" ng-if="ctrl.panel.cumulativeConf.enable">
        <div class="gf-form">
          <label class="gf-form-label width-8">初始值</label>
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-8">累计</label>
        </div>
        <div class="gf-form">
          <label class="gf-form-label">
            <a class="pointer" ng-click="ctrl.panel.cumulativeConf.initMapping=ctrl.panel.cumulativeConf.initMapping||[];ctrl.panel.cumulativeConf.initMapping.push({initRefId:'',sets:['']})">
              <i class="fa fa-plus"></i>
            </a>
          </label>
        </div>
      </div>
      <div class="gf-form-inline" ng-repeat="item in ctrl.panel.cumulativeConf.initMapping" ng-if="ctrl.panel.cumulativeConf.enable">
        <div class="gf-form">
          <input type="text" class="gf-form-input width-8" ng-model="item.initRefId" spellcheck="false" placeholder=""
            ng-blur="ctrl.refresh()">
        </div>
        <div class="gf-form" ng-repeat="set in item.sets track by $index">
          <input type="text" class="gf-form-input width-8" ng-model="item.sets[$index]" spellcheck="false" placeholder=""
            ng-blur="ctrl.refresh()">
          <label class="gf-form-label">
            <a class="pointer" ng-click="ctrl.removeInitMapping(item,set)">
              <i class="fa fa-trash"></i>
            </a>
          </label>
        </div>
        <div class="gf-form">
          <label class="gf-form-label">
            <a class="pointer" ng-click="item.sets.push('')">
              <i class="fa fa-plus"></i>
            </a>
          </label>
        </div>
      </div>
    </div>
  </div>
  <div class="editor-row" ng-switch-when="line">
    <div class="section gf-form-group">
      <h5 class="section-heading">MarkLines
        <button class="btn btn-inverse" ng-click="ctrl.addMarkLine()">
          <i class="fa fa-plus"></i>&nbsp;
        </button>
      </h5>
      <div class="gf-form-inline">
        <div class="gf-form">
          <label class="gf-form-label">formatter
            <tip>模板变量有 {a}、{b}、{c}、{d}，分别表示系列名，数据名，数据值，百分比</tip>
          </label>
        </div>
      </div>
      <div ng-repeat="markline in ctrl.panel.marklines">
        <div class="gf-form-inline">
          <div class="gf-form">
            <div class="gf-form-select-wrapper">
              <select class="gf-form-input width-7" ng-model="markline.type" ng-options="serie for serie in ['min','max','average']"
                ng-change="ctrl.render()"></select>
            </div>
          </div>
          <div class="gf-form">
            <label class="gf-form-label query-keyword width-4">label</label>
          </div>
          <div class="gf-form">
            <ec-clear-val ec-target='markline.label.position'></ec-clear-val>
            <div class="gf-form-select-wrapper">
              <select class="gf-form-input width-7" ng-model="markline.label.position" ng-options="serie for serie in ['start','middle','end']"
                ng-change="ctrl.render()"></select>
            </div>
          </div>
          <div class="gf-form">
            <label class="gf-form-label query-keyword width-6">lineStyle</label>
          </div>
          <div class="gf-form">
            <ec-clear-val ec-target='markline.lineStyle.color'></ec-clear-val>
            <input type="text" class="gf-form-input width-11" ng-model="markline.lineStyle.color" ng-change="ctrl.render()">
            <label class="gf-form-label">
              <spectrum-picker ng-model="markline.lineStyle.color" ng-change="ctrl.render()"></spectrum-picker>
            </label>
          </div>
          <div class="gf-form">
            <ec-clear-val ec-target='markline.lineStyle.width'></ec-clear-val>
            <input type="text" class="gf-form-input width-5" ng-model="markline.lineStyle.width" ng-change="ctrl.render()">
          </div>
          <div class="gf-form gf-form--grow">
            <div class="gf-form-label gf-form-label--grow"></div>
          </div>
          <div class="gf-form">
            <label class="gf-form-label">
              <a class="pointer" ng-click="ctrl.removeMarkLine(markline)">
                <i class="fa fa-trash"></i>
              </a>
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="editor-row" ng-switch-when="line">
    <div class="section gf-form-group">
      <h5 class="section-heading">markPoint</h5>
      <div class="gf-form-inline">
        <div class="gf-form">
          <label class="gf-form-label query-keyword width-9">
            data
          </label>
        </div>
        <div class="gf-form" ng-repeat="vp in ctrl.panel.echarts.series.line.markPoint.data track by $index">
          <select class="gf-form-input" ng-model="vp.type" ng-options="serie for serie in ['min','max','average']"></select>
          <input type="text" class="gf-form-input width-14" ng-model="vp.name">
          <label class="gf-form-label">
            <a ng-click="ctrl.removeMarkPointData($index)">
              <i class="fa fa-remove"></i>
            </a>
          </label>
        </div>

        <div class="gf-form">
          <label class="gf-form-label query-keyword">
            <a ng-click="ctrl.addMarkPointData()">
              <i class="fa fa-plus"></i>
            </a>
          </label>
        </div>

        <div class="gf-form gf-form--grow">
          <div class="gf-form-label gf-form-label--grow"></div>
        </div>
      </div>
      <div class="gf-form">
        <label class="gf-form-label width-9">position</label>
        <select class="gf-form-input" ng-model="ctrl.panel.echarts.series.line.markPoint.label.normal.position"
          ng-options="serie for serie in ['top','left','right','bottom','inside','insideLeft','insideRight','insideTop','insideBottom','insideTopLeft','insideBottomLeft','insideTopRight','insideBottomRight']"></select>
      </div>
      <div class="gf-form">
        <label class="gf-form-label width-9">symbol
          <tip>'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'</tip>
        </label>
        <input type="text" class="gf-form-input width-30" ng-model="ctrl.panel.echarts.series.line.markPoint.symbol"
          ng-change="ctrl.render()" ng-model-onblur>
      </div>
      <div class="gf-form">
        <label class="gf-form-label width-9">symbolSize</label>
        <input type="text" class="gf-form-input width-30" ng-model="ctrl.panel.echarts.series.line.markPoint.symbolSize"
          ng-change="ctrl.render()" ng-model-onblur>
      </div>
      <div class="gf-form">
        <label class="gf-form-label width-9">symbolRotate</label>
        <input type="text" class="gf-form-input width-30" ng-model="ctrl.panel.echarts.series.line.markPoint.symbolRotate"
          ng-change="ctrl.render()" ng-model-onblur>
      </div>
      <gf-form-switch class="gf-form" label="Show" label-class="width-9" checked="ctrl.panel.echarts.series.line.markPoint.label.normal.show"
        on-change="ctrl.render()"></gf-form-switch>
      <ec-opt-textstyle ctrl='ctrl' text-style='ctrl.panel.echarts.series.line.markPoint.label.normal.textStyle' />
      <gf-form-switch class="gf-form" label-class="width-9" label="formatter Expression" checked="ctrl.panel.echarts.series.line.markPoint.formatterExpression.enable"
        on-change="ctrl.render()"></gf-form-switch>
      <div class="gf-form-inline" ng-show="ctrl.panel.echarts.series.line.markPoint.formatterExpression.enable">
        <div class="gf-form">
          <label class="gf-form-label width-9">
            args
          </label>
        </div>
        <div class="gf-form" ng-repeat="argument in ctrl.panel.echarts.series.line.markPoint.formatterExpression.args track by $index">
          <input type="text" class="gf-form-input width-13" ng-model="argument.name">
          <label class="query-keyword width-2"> = </label>
          <input type="number" class="gf-form-input width-3" ng-model="argument.defVal">
          <label class="gf-form-label">
            <a ng-click="ctrl.removeExpressionArgument($index)">
              <i class="fa fa-remove"></i>
            </a>
          </label>
        </div>

        <div class="gf-form">
          <label class="gf-form-label query-keyword">
            <a ng-click="ctrl.addExpressionArgument()">
              <i class="fa fa-plus"></i>
            </a>
          </label>
        </div>

        <div class="gf-form gf-form--grow">
          <div class="gf-form-label gf-form-label--grow"></div>
        </div>
      </div>
      <div class="gf-form" ng-show="ctrl.panel.echarts.series.line.markPoint.formatterExpression.enable">
        <label class="gf-form-label width-9">expression
          <tip>AngularJS 语法</tip>
        </label>

        <input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.line.markPoint.formatterExpression.prefixes"
          ng-change="ctrl.render()" placeholder="prefixes" ng-model-onblur>
        <input type="text" class="gf-form-input width-30" ng-model="ctrl.panel.echarts.series.line.markPoint.formatterExpression.expression"
          ng-change="ctrl.render()" ng-model-onblur>
        <input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.line.markPoint.formatterExpression.suffix"
          ng-change="ctrl.render()" placeholder="suffix" ng-model-onblur>
      </div>
      <pre>
                  params={
                      componentType: 'series',
                      // 系列类型
                      seriesType: string,
                      // 系列在传入的 option.series 中的 index
                      seriesIndex: number,
                      // 系列名称
                      seriesName: string,
                      // 数据名，类目名
                      name: string,
                      // 数据在传入的 data 数组中的 index
                      dataIndex: number,
                      // 传入的原始数据项
                      data: Object,
                      // 传入的数据值
                      value: number|Array,
                      // 数据图形的颜色
                      color: string,

                  }
              </pre>
    </div>
  </div>

  <div class="editor-row" ng-switch-when="bar">
    <div class="section gf-form-group">
      <h5 class="section-heading">Bar</h5>
      <div class="gf-form-inline">
        <div class="gf-form">
          <label class="gf-form-label width-7">barWidth</label>
          <input type="text" class="gf-form-input width-5" ng-model="ctrl.seriesConf.bar.barWidth">
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-7">barMinHeight</label>
          <input type="text" class="gf-form-input width-5" ng-model="ctrl.seriesConf.bar.barMinHeight">
        </div>
      </div>
    </div>
    <div class="section gf-form-group">
      <h5 class="section-heading">Label</h5>
      <div class="gf-form-inline">
        <div class="gf-form">
          <label class="gf-form-label query-keyword width-7">Style</label>
        </div>
        <gf-form-switch class="gf-form" label="Show" label-class="width-9" checked="ctrl.seriesConf.bar.label.normal.show"
          on-change="ctrl.render()"></gf-form-switch>
        <div class="gf-form">
          <label class="gf-form-label width-7">position</label>
          <select class="gf-form-input" ng-model="ctrl.seriesConf.bar.label.normal.position" ng-options="serie for serie in ['top','left','right','bottom','inside','insideLeft','insideRight','insideTop','insideBottom','insideTopLeft','insideBottomLeft','insideTopRight','insideBottomRight']"></select>
        </div>
      </div>
      <div class="gf-form-inline">
        <div class="gf-form">
          <label class="gf-form-label query-keyword width-7">formatter</label>
        </div>
        <gf-form-switch class="gf-form" label-class="width-9" label="启用" checked="ctrl.panel.echarts.series.bar.label.formatterExpression.enable"
          on-change="ctrl.render()"></gf-form-switch>
        <div class="gf-form">
          <label class="gf-form-label width-7">formatTmpl</label>
          <input type="text" class="gf-form-input width-15" ng-model="ctrl.panel.echarts.series.bar.label.formatterExpression.formatTmpl">
        </div>
      </div>
      <div class="gf-form-inline">
        <div class="gf-form">
          <label class="gf-form-label query-keyword width-7">textStyle</label>
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-7">color</label>
          <span class="gf-form-label">
            <spectrum-picker ng-model="ctrl.seriesConf.bar.label.normal.textStyle.color" ng-change="ctrl.render()"></spectrum-picker>
          </span>
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-7">fontStyle</label>
          <!--<input type="text" class="gf-form-input width-7" ng-model="ctrl.seriesConf.bar.label.normal.textStyle.fontStyle">-->
          <select class="gf-form-input" ng-model="ctrl.seriesConf.bar.label.normal.textStyle.fontStyle" ng-options="serie for serie in ['normal','italic','oblique']"
            ng-change="ctrl.refresh()"></select>
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-8">fontWeight
            <tip>'normal', 'bold', 'bolder', 'lighter', '100', '130', '200', '300'</tip>
          </label>
          <input type="text" class="gf-form-input width-7" ng-model="ctrl.seriesConf.bar.label.normal.textStyle.fontWeight">
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-7">fontSize</label>
          <input type="text" class="gf-form-input width-7" ng-model="ctrl.seriesConf.bar.label.normal.textStyle.fontSize">
        </div>
      </div>
    </div>
  </div>

  <div class="editor-row" ng-switch-when="pie">
    <div class="section gf-form-group">
      <h5 class="section-heading">Label</h5>
      <div class="gf-form-inline">
        <gf-form-switch class="gf-form" label="Show" label-class="width-8" checked="ctrl.panel.echarts.series.pie.label.normal.show"
          on-change="ctrl.render()"></gf-form-switch>
      </div>
      <div class="gf-form">
        <label class="gf-form-label query-keyword width-8">textStyle</label>
      </div>
      <ec-opt-textstyle ctrl='ctrl' text-style='ctrl.panel.echarts.series.pie.label.normal.textStyle' />
      <div class="gf-form">
        <label class="gf-form-label query-keyword width-8">position</label>
        <!--<input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.pie.label.normal.position">-->
        <select class="gf-form-input" ng-model="ctrl.panel.echarts.series.pie.label.normal.position" ng-options="serie for serie in ['outside','inside','center']"
          ng-change="ctrl.refresh()"></select>
      </div>
    </div>
    <div class="section gf-form-group">
      <h5 class="section-heading">labelLine</h5>
      <div class="gf-form-inline">
        <gf-form-switch class="gf-form" label="Show" label-class="width-8" checked="ctrl.panel.echarts.series.pie.labelLine.normal.show"
          on-change="ctrl.render()"></gf-form-switch>
        <div class="gf-form">
          <label class="gf-form-label query-keyword width-8">length</label>
          <input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.pie.labelLine.normal.length">
        </div>
        <div class="gf-form">
          <label class="gf-form-label query-keyword width-8">length2</label>
          <input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.pie.labelLine.normal.length2">
        </div>
        <gf-form-switch class="gf-form" label="smooth" label-class="width-8" checked="ctrl.panel.echarts.series.pie.labelLine.normal.smooth"
          on-change="ctrl.render()"></gf-form-switch>
      </div>
      <div class="gf-form">
        <label class="gf-form-label query-keyword width-8">lineStyle</label>
      </div>
      <ec-opt-linestyle ctrl='ctrl' line-style='ctrl.panel.echarts.series.pie.labelLine.normal.lineStyle' />
    </div>
    <div class="section gf-form-group">
      <div class="gf-form-inline">
        <div class="gf-form">
          <label class="gf-form-label query-keyword width-7">center</label>
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-5">x</label>
          <input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.pie.center[0]">
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-5">y</label>
          <input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.pie.center[1]">
        </div>
      </div>
      <div class="gf-form-inline">
        <div class="gf-form">
          <label class="gf-form-label query-keyword width-7">radius</label>
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-5">inner</label>
          <input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.pie.radius[0]">
        </div>
        <div class="gf-form">
          <label class="gf-form-label width-5">outer</label>
          <input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.echarts.series.pie.radius[1]">
        </div>
        <gf-form-switch class="gf-form" label="Pie Ring" label-class="width-8" checked="ctrl.panel.style.innerRing.show"
          on-change="ctrl.render()"></gf-form-switch>
        <div class="gf-form" ng-show="ctrl.panel.style.innerRing.show">
          <label class="gf-form-label width-7">width</label>
          <input type="text" class="gf-form-input width-7" ng-model="ctrl.panel.style.innerRing.width">
        </div>
        <div class="gf-form" ng-show="ctrl.panel.style.innerRing.show">
          <label class="gf-form-label width-7">color</label>
          <spectrum-picker ng-model="ctrl.panel.style.innerRing.color" ng-change="refresh()"></spectrum-picker>
          <input type="text" class="gf-form-input width-10" ng-model="ctrl.panel.style.innerRing.color">
        </div>
      </div>
    </div>
  </div>
  <div class="editor-row" ng-switch-when="pie">

    <div class="section gf-form-group">
      <h5 class="section-heading">other data</h5>
      <gf-form-switch class="gf-form" label-class="width-8" label="enable" checked="ctrl.panel.pieExt.dataExt.enable"
        on-change="ctrl.render()"></gf-form-switch>
      <div class="gf-form-inline" ng-if="ctrl.panel.pieExt.dataExt.enable">
        <div class="gf-form">
          <label class="gf-form-label width-9">
            args
          </label>
        </div>
        <div class="gf-form" ng-repeat="argument in ctrl.panel.pieExt.dataExt.items track by $index">
          <input type="text" class="gf-form-input width-13" placeholder="varname" ng-model="argument.varname">
          <input type="text" class="gf-form-input width-13" placeholder="title" ng-model="argument.title">
          <!-- <gf-form-switch class="gf-form" label-class="width-8" label="配置" checked="argument.isKeyvalue"></gf-form-switch>
            <input type="text" class="gf-form-input width-13" ng-if="argument.isKeyvalue" placeholder="propKey" ng-model="argument.propKey">
            <input type="text" class="gf-form-input width-13" ng-if="argument.isKeyvalue" placeholder="propValue" ng-model="argument.propValue"> -->
          <label class="gf-form-label">
            <a ng-click="ctrl.removeArgument(ctrl.panel.pieExt.dataExt.items,$index)">
              <i class="fa fa-remove"></i>
            </a>
          </label>
        </div>
        <div class="gf-form">
          <label class="gf-form-label query-keyword">
            <a ng-click="ctrl.addArgument(ctrl.panel.pieExt.dataExt.items)">
              <i class="fa fa-plus"></i>
            </a>
          </label>
        </div>
        <div class="gf-form gf-form--grow">
          <div class="gf-form-label gf-form-label--grow"></div>
        </div>
      </div>
    </div>
  </div>
</div>
